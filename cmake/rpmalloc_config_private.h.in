#pragma once

#include <rpmalloc_config.h>

#cmakedefine01 RPMALLOC_ENABLE_THREAD_CACHE
#cmakedefine01 RPMALLOC_ENABLE_VALIDATE_ARGS
#cmakedefine01 RPMALLOC_ENABLE_ASSERTS
#cmakedefine01 RPMALLOC_DISABLE_UNMAP
#cmakedefine01 RPMALLOC_ENABLE_UNLIMITED_CACHE
#cmakedefine01 RPMALLOC_ENABLE_ADAPTIVE_THREAD_CACHE

#define RPMALLOC_NO_PRESERVE @RPMALLOC_NO_PRESERVE@
#define RPMALLOC_HEAP_ARRAY_SIZE @RPMALLOC_HEAP_ARRAY_SIZE@
#define RPMALLOC_DEFAULT_SPAN_MAP_COUNT @RPMALLOC_DEFAULT_SPAN_MAP_COUNT@
#define RPMALLOC_GLOBAL_CACHE_MULTIPLIER @RPMALLOC_GLOBAL_CACHE_MULTIPLIER@
#define RPMALLOC_GROW_OR_FAIL @RPMALLOC_GROW_OR_FAIL@

#if RPMALLOC_DISABLE_UNMAP && !RPMALLOC_ENABLE_GLOBAL_CACHE
#  error Must use global cache if unmap is disabled
#endif

#if RPMALLOC_DISABLE_UNMAP
#  undef RPMALLOC_ENABLE_UNLIMITED_CACHE
#  define RPMALLOC_ENABLE_UNLIMITED_CACHE 1
#endif

#if !RPMALLOC_ENABLE_GLOBAL_CACHE
#  undef RPMALLOC_ENABLE_UNLIMITED_CACHE
#  define RPMALLOC_ENABLE_UNLIMITED_CACHE 0
#endif

#if !RPMALLOC_ENABLE_THREAD_CACHE
#  undef RPMALLOC_ENABLE_ADAPTIVE_THREAD_CACHE
#  define RPMALLOC_ENABLE_ADAPTIVE_THREAD_CACHE 0
#endif
